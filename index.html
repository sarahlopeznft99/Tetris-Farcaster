<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tetris Game</title>
  <style>
    body {
      margin: 0;
      background: #000;
      color: #fff;
      font-family: "Arial", sans-serif;
      text-align: center;
      overflow: hidden;
    }

    #intro {
      height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: linear-gradient(180deg, #0a0014, #18003d);
    }

    h1 {
      font-size: 3rem;
      letter-spacing: 2px;
      margin-bottom: 1rem;
      color: #ffcc00;
    }

    #play {
      background: #ffcc00;
      border: none;
      color: #000;
      font-weight: bold;
      padding: 16px 40px;
      border-radius: 12px;
      cursor: pointer;
      font-size: 18px;
      margin-top: 20px;
      transition: background 0.3s;
    }

    #play:hover {
      background: #ffee55;
    }

    canvas {
      display: none;
      background: #111;
      margin: 0 auto;
      margin-top: 20px;
      border: 2px solid #ffcc00;
    }

    #score {
      font-size: 1.2rem;
      color: #ffcc00;
      margin-top: 10px;
      display: none;
    }
  </style>
</head>

<body>
  <div id="intro">
    <h1>ðŸ§± TETRIS</h1>
    <button id="play">Play Tetris</button>
  </div>

  <div id="score">Score: 0</div>
  <canvas id="board"></canvas>

  <script>
    const TILE = 24, COLS = 10, ROWS = 20;
    const SHAPES = {
      I: [[1,1,1,1]],
      O: [[1,1],[1,1]],
      T: [[0,1,0],[1,1,1]],
      S: [[0,1,1],[1,1,0]],
      Z: [[1,1,0],[0,1,1]],
      J: [[1,0,0],[1,1,1]],
      L: [[0,0,1],[1,1,1]]
    };
    const COLORS = {
      I:"#00f0f0", O:"#f0f000", T:"#a000f0",
      S:"#00f000", Z:"#f00000", J:"#0000f0", L:"#f0a000"
    };

    let grid, current, ctx, canvas;
    let score = 0;
    let dropTimer = 0, dropInterval = 600;

    function newPiece(){
      const types = Object.keys(SHAPES);
      const type = types[Math.floor(Math.random()*types.length)];
      return { type, shape: SHAPES[type].map(r => r.slice()), x: 3, y: 0 };
    }

    function collide(x,y,shape){
      return shape.some((r,dy)=>r.some((v,dx)=>v && (
        grid[y+dy]?.[x+dx] ||
        x+dx<0 || x+dx>=COLS || y+dy>=ROWS
      )));
    }

    function place(){
      current.shape.forEach((r,dy)=>r.forEach((v,dx)=>{
        if(v) grid[current.y+dy][current.x+dx]=current.type;
      }));
    }

    function clearLines(){
      let cleared = 0;
      grid = grid.filter(r=>{
        if(r.every(c=>c)) { cleared++; return false; }
        return true;
      });
      while(grid.length<ROWS) grid.unshift(Array(COLS).fill(0));
      if (cleared > 0) {
        score += cleared * 100;
        document.getElementById("score").textContent = "Score: " + score;
      }
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      grid.forEach((r,y)=>r.forEach((c,x)=>{
        if(c){
          ctx.fillStyle = COLORS[c];
          ctx.fillRect(x*TILE,y*TILE,TILE-1,TILE-1);
        }
      }));
      ctx.fillStyle = COLORS[current.type];
      current.shape.forEach((r,dy)=>r.forEach((v,dx)=>{
        if(v) ctx.fillRect((current.x+dx)*TILE,(current.y+dy)*TILE,TILE-1,TILE-1);
      }));
    }

    function step(){
      if(!collide(current.x,current.y+1,current.shape)) current.y++;
      else {
        place();
        clearLines();
        current = newPiece();
        if(collide(current.x,current.y,current.shape)){
          alert("Game Over! Final Score: " + score);
          startGame(); // restart
        }
      }
    }

    function update(t=0){
      const dt = t - dropTimer;
      if(dt > dropInterval){
        step();
        dropTimer = t;
      }
      draw();
      requestAnimationFrame(update);
    }

    function rotate(shape){
      return shape[0].map((_,i)=>shape.map(r=>r[i]).reverse());
    }

    function initGrid(){
      grid = Array.from({length:ROWS},()=>Array(COLS).fill(0));
    }

    function startGame(){
      document.getElementById("intro").style.display = "none";
      document.getElementById("score").style.display = "block";
      canvas = document.getElementById("board");
      canvas.style.display = "block";
      canvas.width = COLS*TILE;
      canvas.height = ROWS*TILE;
      ctx = canvas.getContext("2d");
      score = 0;
      initGrid();
      current = newPiece();
      dropTimer = 0;
      dropInterval = 600;
      document.getElementById("score").textContent = "Score: 0";
      update();
    }

    document.getElementById("play").addEventListener("click", startGame);

    document.addEventListener("keydown",e=>{
      if(!current) return;
      if(e.key==="ArrowLeft"&&!collide(current.x-1,current.y,current.shape)) current.x--;
      else if(e.key==="ArrowRight"&&!collide(current.x+1,current.y,current.shape)) current.x++;
      else if(e.key==="ArrowDown"&&!collide(current.x,current.y+1,current.shape)) current.y++;
      else if(e.key==="ArrowUp"){
        const r = rotate(current.shape);
        if(!collide(current.x,current.y,r)) current.shape = r;
      }
    });
  </script>
</body>
</html>
